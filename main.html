<script type="text/javascript">
  RED.nodes.registerType('sma-webconnect', {
      category: 'SMA',
      color: '#C0DEED',
      credentials: {
        password: { type: "password" }
      },
      defaults: {
          ip_address: { value: "" },
          right: { value: "usr" },
          use_tls: { value: true },
          device_selection: { value: "sb_tripower" }
      },
      inputs: 1,
      outputs: 1,
      icon: "white-globe.png",
      label: function() {
          return this.ip_address || "sma-webconnect";
      }
  });
</script>

<script type="text/x-red" data-template-name="sma-webconnect">
<div class="form-row">
  <label for="node-input-ip_address"><i class="fa fa-desktop"></i> IP</label>
  <input type="text" id="node-input-ip_address" placeholder="192.168.1.42">
</div>
<div class="form-row">
  <input type="checkbox" id="node-input-use_tls" style="display: inline-block; width: auto; vertical-align: top;">
  <label for="node-input-use_tls" style="width: auto"><i class="fa fa-lock"></i> Use HTTPS connection</label>
</div>
<div class="form-row">
  <label for="node-input-right"><i class="fa fa-group"></i> User Group</label>
  <select id="node-input-right">
    <option value="istl">Installer</option>
    <option value="usr">User</option>
  </select>
</div>
<div class="form-row">
  <label for="node-input-password"><i class="fa fa-asterisk"></i> Password</label>
  <input type="password" id="node-input-password">
</div>
<div class="form-row">
  <span>Device Selection</span>
</div>
<div class="form-row">
  <label for="node-input-device_selection"><i class="fa fa-gears"></i> Device</label>
  <select id="node-input-device_selection">
    <option selected value="sb_tripower">Sunny Tripower 8.0/10.0 (3AV-40)</option>
    <option value="sunny_tripower_smart_energy">Sunny Tripower Smart Energy 5.0/6.0/8.0/10.0 (3SE-40)</option>
    <option value="sb_storage">Sunny Boy Storage 2.5</option>
    <option value="sunny_boy">Sunny Boy 3.0/3.6/4.0/5.0 (1AV-40)</option>
  </select>
</div>
<div class="form-tips">
  <b> Device Selection: </b>
  <br>
  These are some devices that are known to work with this node, the node will read and provide basic values from these.
  <br>
  If you find a new device that works with the node feel free to post a suggestion on the nodes <a href="https://github.com/rlindner/node-red-contrib-sma-webconnect">github page</a>.
  <br>
  <br>
  <b> FAQ </b>
  <br>
  <b>Q:</b> Will this node work with my device?
  <br>
  <b>A:</b> As long as your device provides a web interface this node should be able to read values from it.
  You can easily test this if you can connect to the IP of your device on port 80 (HTTP) or 433 (HTTPS).
  <br>
</div>
</script>

<script type="text/x-red" data-help-name="sma-webconnect">
  <p>A node that connects to SMA devices in your local network using their webinterface.</p>
</script>
